@use "sass:math";
@use "sass:map";

// ========================================
//  Break Point
// ========================================


$breakpoints: (
  'mobile': 'screen and ( min-width: 375px )',
  'tablet': 'screen and ( min-width: 768px )',
  'desktop': 'screen and ( min-width: 1024px )',
);

@mixin mq( $breakpoint: "tablet" ) {
  @media #{ map.get( $breakpoints, $breakpoint)}{
    @content;
  }
}

// ========================================
//  Font Size
// ========================================

@mixin font-size($size) {
  font-size: $size + px;
  font-size: ($size / 16) * 1rem;
}


// ========================================
//  Clamp Mixins
// ========================================

// ----------------------------------------
//  自動 clamp 生成（Mobile）375→767px
// ----------------------------------------

//$property - font-size / margin / padding / width / gap など
//$start-px - 初期サイズ（px）
//$end-px - 終了サイズ（px）
@mixin clamp-mobile($property, $start-px, $end-px) {
  $slope: math.div($end-px - $start-px, 767 - 375); //傾き
  $intercept-rem: math.div($start-px - ($slope * 375), 16); // 切片（rem）

  // clamp生成
  #{$property}: clamp(
    #{$start-px}px,
    calc(#{$intercept-rem}rem + #{$slope * 100}vw),
    #{$end-px}px
  );
}

// ----------------------------------------
//  自動 clamp 生成（PC）1024→1920px
// ----------------------------------------

//$property - font-size / margin / padding / width / gap など
//$start-px - 初期サイズ（px）
//$end-px - 終了サイズ（px）
@mixin clamp-desktop($property, $start-px, $end-px) {
  $slope: math.div($end-px - $start-px, 1920 - 1024); //傾き
  $intercept-rem: math.div($start-px - ($slope * 1024), 16); // 切片（rem）

  // clamp生成
  #{$property}: clamp(
    #{$start-px}px,
    calc(#{$intercept-rem}rem + #{$slope * 100}vw),
    #{$end-px}px
  );
}


// ----------------------------------------
//  自動 逆clamp 生成（Mobile）375→767px
// ----------------------------------------

//$property - font-size / margin / padding / width / gap など
//$start-px - 初期サイズ（px）
//$end-px - 終了サイズ（px）
@mixin clamp-mobile-reverse($property, $start-px, $end-px) {
  $slope: math.div($end-px - $start-px, 767 - 375); //傾き
  $intercept-rem: math.div($start-px - ($slope * 375), 16); // 切片（rem）

  // clamp生成
  #{$property}: clamp(
    #{$end-px}px,
    calc(#{$intercept-rem}rem + #{$slope * 100}vw),
    #{$start-px}px
  );
}

// ----------------------------------------
//  自動 逆clamp 生成（PC）1024→1920px
// ----------------------------------------

//$property - font-size / margin / padding / width / gap など
//$start-px - 初期サイズ（px）
//$end-px - 終了サイズ（px）
@mixin clamp-desktop-reverse($property, $start-px, $end-px) {
  $slope: math.div($end-px - $start-px, 1920 - 1024); //傾き
  $intercept-rem: math.div($start-px - ($slope * 1024), 16); // 切片（rem）

  // clamp生成
  #{$property}: clamp(
    #{$end-px}px,
    calc(#{$intercept-rem}rem + #{$slope * 100}vw),
    #{$start-px}px
  );
}

// ----------------------------------------
//  自動 clamp padding 生成（Mobile）375→767px
// ----------------------------------------

/// 1つの clamp 値を生成する関数
@function fluid-mobile($start-px, $end-px) {
  $slope: math.div($end-px - $start-px, 767 - 375);
  $base: $start-px - $slope * 375;

  @return clamp(#{$start-px}px, #{$base / 16}rem + #{$slope * 100}vw, #{$end-px}px);
}

/// 複数値対応 clamp
@mixin clamp-mobile-multi($property, $mobile-values, $tablet-values) {
  $mobile-list: if(type-of($mobile-values) == number, ($mobile-values), $mobile-values);
  $tablet-list: if(type-of($tablet-values) == number, ($tablet-values), $tablet-values);

  $result: ();

  @for $i from 1 through length($mobile-list) {
    $min: nth($mobile-list, $i);
    $max: nth($tablet-list, $i);
    $result: append($result, fluid-mobile($min, $max), space); 
  }

  #{$property}: $result;
}

// ----------------------------------------
//  自動 clamp padding 生成（PC）1024→1920px
// ----------------------------------------

/// 1つの clamp 値を生成する関数
@function fluid-desktop($start-px, $end-px) {
  $slope: math.div($end-px - $start-px, 1920 - 1024);
  $base: $start-px - $slope * 1024;

  @return clamp(#{$start-px}px, #{$base / 16}rem + #{$slope * 100}vw, #{$end-px}px);
}

/// 複数値対応 clamp
@mixin clamp-desktop-multi($property, $tablet-values, $desktop-values) {
  $tablet-list: if(type-of($tablet-values) == number, ($tablet-values), $tablet-values);
  $desktop-list: if(type-of($desktop-values) == number, ($desktop-values), $desktop-values);

  $result: ();

  @for $i from 1 through length($tablet-list) {
    $min: nth($tablet-list, $i);
    $max: nth($desktop-list, $i);
    $result: append($result, fluid-desktop($min, $max), space); 
  }

  #{$property}: $result;
}